#compdef loc

_loc() {
  _arguments \
    '1: :->commands' \
    '(- *)'{-l,--list-commands}'[list available commands]' \
    '(- *)'{-h,--help}'[show help message]'

  case "$state" in
    commands)
      cmds=($(loc -l))
      if [[ "${#cmds[@]}" != 0 ]]; then
        _values 'commands' "${cmds[@]}"
      fi
      ;;
  esac
}
