fdcd() {
  local file dirname

  if ! hascommand fd; then
    echo 'Command not found: fd' 1>&2
    return 1
  fi

  if ! hascommand fzf; then
    echo 'Command not found: fzf' 1>&2
    return 1
  fi

  file=$(fd --max-results 1000 "$@" | fzf --ansi)
  [[ "$file" == "" ]] && return 1

  dirname=$(dirname "$file")
  [[ "$dirname" == '' ]] && return 1

  cd "$dirname" || return
}
